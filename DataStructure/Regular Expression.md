# Regular Expression

- 정규 표현식/정규식, regex/regexp라고 쓰기도 한다. 
- 프로그래밍에서 사용하는 일조으이 형식 언어. 주로 문자열 관련 프로그래밍에 많이 사용
- 프로그램을 작성할 때 특성상 일정한 규칙을 가진 텍스트 문자열을 사용하는 경우에 정규 표현식을 사용
- 정규 표현식은 언어마다 문법이 조금씩 다르다. 크게 나누면 표준으로 인정된 POSIX의 정규 표현식과 그것에서 문법을 확장한 Perl 방식의 PCRE 이 둘로 나뉜다. POSIX 표준의 경우 다시 Basic과 Extended로 나뉜다. 

<h3>문법</h3>

[패턴 구분자]

- 정규식의 패턴이 달라질 경우, 그것을 구분하는 문자. 
- 특수 문자 중 \를 제외하고 아무거나 사용 가능. 의미를 가진 문자(메타문자)도 패턴구분자로 사용가능

[메타 문자]

- 정규 표현식에서 일정한 의미를 가지고 쓰는 특수문자
- 쓰이는 글자가 포함된 패턴을 넣으려면 글자 앞에 \를 삽입

| 문자  | 의미                                                         |
| ----- | ------------------------------------------------------------ |
| ^     | 문자열의 시작                                                |
| $     | 문자열의 종료. 옵션에 따라 문장의 끝 또는 문서의 끝에 배치   |
| .     | 임의의 한 문자                                               |
| [ ]   | 문자 클래스. 문자 클래스 안에 들어가 있는 문자는 그 바깥에서 하나의 문자로 취급 |
| \|    | or                                                           |
| ?     | 앞 문자가 없거나 하나 있음 = {0,1}                           |
| +     | 앞 문자가 하나 이상 = {1, }                                  |
| *     | 앞 문자가 0개 이상 = {0, }                                   |
| {n,m} | 앞 문자가 n개 이상 m개 이하                                  |
| {n, } | 앞 문자가 n개 이상                                           |
| {n}   | 앞 문자가 정확히 n개 = {n, n}                                |
| ()    | 하나의 패턴 구분자 안에 서브 패턴을 지정해서 사용할 경루 괄호로 묶어주는 방식을 사용 |
| \s    | 공백문자                                                     |
| \b    | 문자와 공백 사이를 의미                                      |
| \d    | 숫자 [0~9]왁 같다                                            |
| \t    | 탭 문자                                                      |
| \w    | 단어 영문자 + 숫자 + _(밑줄) [0-9a-zA-Z_] 대문자W는 반대를 의미 |

[패턴 변경자]

- 패턴 구분자가 끝나면 그 뒤에 쓴다
- 패턴에 일괄적으로 변경을 가할 때 사용
- 정규식 엔진에 따라 변경자의 적용 방식이 상이하므로 해당 구현의 메뉴얼을 읽어봐야 한다.
- i 
  - 패턴을 대소문자 구분 없이 검사
  -  [a-z]로만 검사해도 자동으로 [a-zA-Z]와 같은 기능
  -  영어가 아닌 언어(독일어, 프랑스어 등)를 다룰 때에는 조심
  - 대소문자라는 개념이 없는 언어에서는 아무 역할도 하지 않는다.\
- s
  - 임의의 한 문자를 가리키는 `.`메타 문자에 개행 문자(\n)를 포함
  - `.`이 줄바꿈도 임의의 한 문자로 취급하여 찾는다.

- g
  -  `^`문자가 문장이 아닌 문서의 처음에, `$` 문자가 문장의 끝(라인 피드 \n)이 아닌 주어진 문자열의 끝에 매치되게 변경
- m
  - 주어진 문자열에 줄바꿈이 있을 경우, 여러 줄로 취급하여 검사
  -  `^`은 한 줄의 시작, `$`는 한 줄의 끝으로 의미가 변경
- x
  - 공백 문자를 무시
  - 이스케이프(역슬래쉬하고 같이 쓸 경우)하거나 문자 클래스 안에 있을 경우에는 예외. 
  -  이 변경자를 지원하지 않는 엔진이 많다

[예제]

- ^[0-9]*$ : 숫자
- ^[a-zA-Z]\*$,  /^[a-z]*$/i : 영문자 
- ^[가-힣]*$ : 현대 한글(유니코드를 지원하는 정규식 엔진에 한정)
- ^[ㄱ-ㅣ가-힐]*$ : 한글 자모 낱자를 포함한 모든 현대 할글
- ^[a-zA-Z0-9]*$ : 영문/숫자
- E-mail :  ^[a-zA-Z0-9]+@[a-zA-Z0-9]+$
- 휴대폰 :   ^01(?:0|1|[6-9]) - (?:\d{3}|\d{4}) - \d{4}$
- 일반 전화 : ^\d{2,3} - \d{3,4} - \d{4}$
- 주민등록번호 : \d{6} \- [1-4]\d{6}
- IP주소 :   ([0-9]{1,3}) \. ([0-9]{1,3}) \. ([0-9]{1,3}) \. ([0-9]{1,3})

[탐욕적 및 게으른 수량자]

- 일치하는 패턴을 찾는 회수 제한이 없어 필요이상의 상황을 연출하기도 한다. b/c 의도적으로 수량자를 탐욕적으로 만듬
- 탐욕적 수량자
  - 가능하면 가장 큰 덩어리를 찾는다는 뜻
  - *, +, {n, }
- 게으른 수량자(Lazy Quantifier)
  - 패턴에 근접하는 최소한의 덩어리를 찾는다는 뜻
  - *?, +?, {n, }?

<h3>공부</h3>

- [RegexOne][https://regexone.com/]
- [RegExr: Learn, Build, & Test RegEx][https://regexr.com/]
- 시각화 사이트
  - [Regexper][https://regexper.com/]
  - [Debuggex][https://www.debuggex.com/]